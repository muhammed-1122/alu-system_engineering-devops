#!/usr/bin/env bash
# Installs Nginx and configures a 301 redirect for /redirect_me

# --- Installation (from Task 1) ---
sudo apt-get update -y
sudo apt-get install nginx -y
echo "Holberton School for the win!" | sudo tee /var/www/html/index.html

# --- Configuration for 301 Redirect ---
# Insert the redirect rule into the default site configuration
# This 'sed' command adds the location block after the 'server_name _;' line
CONFIG_TEXT="\\\n\tlocation /redirect_me {\n\t\treturn 301 https://www.youtube.com/watch?v=QH2-TGUlwu4;\n\t}"
sudo sed -i "/server_name _;/a $CONFIG_TEXT" /etc/nginx/sites-available/default

# Restart nginx
sudo service nginx restart
